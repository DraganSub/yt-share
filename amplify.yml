version: 1
backend:
  phases:
    build:
      commands:
        - cd server
        - amplify push --yes
  frontend:
    phases:
      preBuild:
        commands:
          - cd client
      build:
        commands:
          - cd client
          - npm ci
          - npm run build
      artifacts:
        baseDirectory: client/build
        files:
          - '**/*'
  appRoot: .